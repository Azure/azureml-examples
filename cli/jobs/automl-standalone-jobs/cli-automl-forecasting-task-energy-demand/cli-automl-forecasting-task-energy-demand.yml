$schema: https://sasumcentralus1809224865.blob.core.windows.net/automl/autoMLForecastingJob.schema.json
# Need final URL for SCHEMAS
type: automl

experiment_name: dpv2-cli-automl-forecasting-experiment
# name: dpv2-sdk-forecasting-train-job-01
description: A Time-Series Forecasting job using energy demand dataset

compute: azureml:cpu-cluster

task: forecasting
# primary_metric: r2_score  # (BUG)

log_verbosity: debug

data:
  target_column_name: "demand"
  training:
    data:
      path: "./training-mltable-folder"
      type: mltable
  validation:
   #n_cross_validations: 5  
   data:
     path: "./validation-mltable-folder"
     type: mltable

limits:
  timeout: 180
  max_trials: 40
  max_concurrent_trials: 5
  trial_timeout_minutes: 20
  enable_early_termination: true
  exit_score: 0.91
  
# featurization:
#   mode: auto

forecasting:
    time_column_name: "timeStamp"
    forecast_horizon : 48
    frequency: "H"
    target_lags: [12]
    target_rolling_window_size: 4
    # TO TRY: ADDITIONAL FORECASTING TRAINING PARAMS ---
    # time_series_id_column_names=["tid1", "tid2", "tid2"],
    # short_series_handling_config=ShortSeriesHandlingConfiguration.DROP,
    # use_stl="season",
    # seasonality=3,

training:
  enable_model_explainability: true

# BUG with enums/values: Bug 1728040
# allowed_models:
#   - TBD
# blocked_models:
#   - ExtremeRandomTrees

properties:
  _automl_internal_save_mlflow: "true"
  _automl_internal_label: "latest"