$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
code: src
command: >-
  python main.py 
  --uri_file_input_mount ${{inputs.uri_file_input_mount}}
  --uri_folder_input_mount ${{inputs.uri_folder_input_mount}}
  --uri_file_input_download ${{inputs.uri_file_input_download}}
  --uri_folder_input_download ${{inputs.uri_folder_input_download}}
  --uri_folder_upload ${{outputs.uri_folder_upload}}
  --uri_file_upload ${{outputs.uri_file_upload}}
  --uri_folder_mount ${{outputs.uri_folder_mount}}
  --uri_file_mount ${{outputs.uri_file_mount}}
  --mlflow_model ${{outputs.mlflow_model}}
  --mltable_eval_mount ${{inputs.mltable_eval_mount}}
inputs:
  uri_file_input_mount:
    type: uri_file 
    path: https://azuremlexamples.blob.core.windows.net/datasets/iris.csv
  uri_folder_input_mount:
    type: uri_folder 
    path: azureml://datastores/workspaceblobstore/paths/private_mltable/
  mltable_eval_mount:
    type: mltable 
    path: azureml://datastores/workspaceblobstore/paths/private_mltable/filedataset/
    mode: ro_mount
  uri_file_input_download:
    type: uri_file 
    path: https://azuremlexamples.blob.core.windows.net/datasets/iris.csv
    mode: download
  uri_folder_input_download:
    type: uri_folder 
    path: azureml://datastores/workspaceblobstore/paths/private_mltable/
    mode: download
outputs:
  uri_folder_upload:
    type: uri_folder
    path: azureml://datastores/workspaceblobstore/paths/cmtest2/uri_folder_upload/
    mode: upload
  mltable_upload:
    type: mltable
    path: azureml://datastores/workspaceblobstore/paths/cmtest2/mltable_upload/
    mode: upload
  mltable_mount:
    type: mltable
    path: azureml://datastores/workspaceblobstore/paths/cmtest2/mltable_mount/
    mode: mount
  mlflow_model:
    type: mlflow_model
    path: azureml://datastores/workspaceblobstore/paths/cmtest2/mlflow_mount/
    mode: mount
  uri_file_upload:
    type: uri_file
    path: azureml://datastores/workspaceblobstore/paths/cmtest2/uri_file_upload/uri_file_upload
    mode: upload
  uri_folder_mount:
    type: uri_folder
    path: azureml://datastores/workspaceblobstore/paths/cmtest2/uri_folder_mount/
    mode: mount
  uri_file_mount:
    type: uri_file
    path: azureml://datastores/workspaceblobstore/paths/cmtest2/uri_file_mount/uri_file_mount
    mode: mount
environment: azureml:AzureML-lightgbm-3.2-ubuntu18.04-py37-cpu@latest
compute: azureml:dpv2
display_name: lightgbm-iris-example
experiment_name: lightgbm-iris-example
description: Train a LightGBM model on the Iris dataset.
environment_variables:
  AZUREML_COMPUTE_USE_COMMON_RUNTIME: 'false' # test out common runtime vs context manager
