$schema: https://azuremlschemas.azureedge.net/latest/pipelineJob.schema.json
type: pipeline

display_name: iris-batch-prediction-using-parallel
description: The hello world pipeline job with inline parallel job
experiment_name: hello-world-parallel-job
tags:
  tag: tagvalue
  owner: sdkteam

settings:
  default_compute: azureml:cpu-cluster
jobs:
  batch_prediction:
    type: parallel
    component: azureml:xiwe_test_pararallel_partition_key@latest
    compute: azureml:cpu-cluster
    inputs:
      input_data: 
        type: mltable
        path: ./neural-iris-mltable
        mode: direct
      score_model: 
        type: uri_folder
        path: ./iris-model
        mode: download
    outputs:
      job_output_file:
        type: uri_file
        path: azureml://datastores/${{default_datastore}}/paths/${{name}}/aggregated_returns.csv
        mode: rw_mount