$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
type: command

description: Prints the environment variables useful for scripts running in a PyTorch training environment.

name: py_torch_hello_world
display_name: PyTorch-hello-world
version: 1

environment: azureml:AzureML-pytorch-1.11-ubuntu20.04-py38-cuda11-gpu@latest
command: >-
  echo "
  RANK: $RANK \n
  LOCAL_RANK: $LOCAL_RANK \n
  NODE_RANK: $NODE_RANK \n
  MASTER_ADDR: $MASTER_ADDR \n
  MASTER_PORT: $MASTER_PORT \n"

resources:
  instance_count: 2
distribution:
  type: pytorch
  process_count_per_instance: 2
