$schema: https://azuremlschemas.azureedge.net/latest/pipelineJob.schema.json
type: pipeline

display_name: 3b_pipeline_with_data
description: Pipeline with 3 component jobs with data dependencies

compute: azureml:cpu-cluster

inputs:
  pipeline_sample_input_data:
    type: uri_folder
    path: ./data

outputs:
  final_pipeline_output:
    mode: rw_mount

jobs:
  componenta:
    type: command
    component: file:./componentA.yml
    inputs:
      componenta_input: ${{parent.inputs.pipeline_sample_input_data}}
    outputs:
      componenta_output: 
        mode: rw_mount
  componentb:
    type: command
    component: file:./componentB.yml
    inputs:
      componentb_input: ${{parent.jobs.componenta.outputs.componenta_output}}
    outputs:
      componentb_output: 
        mode: rw_mount
  componentc:
    type: command
    component: file:./componentC.yml
    inputs:
      componentc_input: ${{parent.jobs.componentb.outputs.componentb_output}}
    outputs:
      componentc_output: ${{parent.outputs.final_pipeline_output}}
      #  mode: upload

